"use strict";(self.webpackChunksocial_crud_app=self.webpackChunksocial_crud_app||[]).push([[750],{4750:function(e,n,t){t.r(n),t.d(n,{default:function(){return v}});var a=t(4165),r=t(5861),s=t(4942),o=t(1413),l=t(885),i=t(3418),u=t(2791),c=t(7689),d=t(4935),m=t(8720),p=t(4256),f=t(184),x=function(e){var n=e.label,t=void 0===n?"Sign in":n,a=e.values,r=e.handleForm,s=e.actionBtn,o=e.onSubmit,l=e.errorMsg;return(0,f.jsx)("div",{className:"relative flex flex-col justify-center min-h-screen overflow-hidden",children:(0,f.jsx)("div",{className:"w-full p-6 m-auto bg-white rounded-md shadow-md lg:max-w-xl",children:(0,f.jsxs)("form",{className:"mt-6",onSubmit:o,children:[(0,f.jsxs)("div",{className:"mb-2",children:[(0,f.jsx)("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-800",children:"Email"}),(0,f.jsx)("input",{type:"email",autoComplete:"off",className:"block w-full px-4 py-2 mt-2 text-gray-900 bg-white border rounded-md focus:border-blue-400 focus:ring-purple-300 focus:outline-none focus:ring focus:ring-opacity-40",value:null===a||void 0===a?void 0:a.email,name:"email",onChange:function(e){return r(e)}})]}),"Sign in"!==t?(0,f.jsxs)("div",{className:"mb-2",children:[(0,f.jsx)("label",{htmlFor:"userName",className:"block text-sm font-semibold text-gray-900",children:"User name"}),(0,f.jsx)("input",{type:"text",autoComplete:"off",className:"block w-full px-4 py-2 mt-2 text-gray-900 bg-white border rounded-md focus:border-blue-400 focus:ring-purple-300 focus:outline-none focus:ring focus:ring-opacity-40",value:null===a||void 0===a?void 0:a.userName,name:"userName",onChange:function(e){return r(e)}})]}):null,(0,f.jsxs)("div",{className:"mb-2",children:[(0,f.jsx)("label",{htmlFor:"password",className:"block text-sm font-semibold text-gray-800",children:"Password"}),(0,f.jsx)("input",{type:"password",className:"block w-full px-4 py-2 mt-2 text-gray-900 bg-white border rounded-md focus:border-purple-400 focus:ring-purple-300 focus:outline-none focus:ring focus:ring-opacity-40",name:"password",onChange:function(e){return r(e)},value:a.password})]}),l,(0,f.jsx)("div",{className:"mt-6",children:s})]})})})},v=function(){var e,n,t=(0,d.Z)((function(e){return e})).setAuth,v=(0,u.useState)({email:"",password:""}),g=(0,l.Z)(v,2),b=g[0],h=g[1],y=(0,u.useState)("Sign in"),N=(0,l.Z)(y,2),w=N[0],j=N[1],k=(0,u.useState)(""),S=(0,l.Z)(k,2),Z=S[0],C=S[1],F=(0,u.useState)(""),I=(0,l.Z)(F,2),M=I[0],_=I[1],E=(0,c.s0)(),U=(0,c.TH)(),B=(null===U||void 0===U||null===(e=U.state)||void 0===e||null===(n=e.form)||void 0===n?void 0:n.pathname)||"/",D=(0,i.D)({mutationKey:"athenticate",mutationFn:function(e){var n=e.values,a=e.api;return m.WY.post(a,n).then((function(e){var n,a,r,s;localStorage.setItem("user",JSON.stringify(null===e||void 0===e||null===(n=e.data)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.user)),t(null===e||void 0===e||null===(r=e.data)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.user),E(B,{replace:!0})})).catch((function(e){console.log({error:e}),"Sign in"===w?alert(e.response.data.data.message):alert(e.response.data.message)}))},onSuccess:function(e){},onError:function(e){console.log({err:e}),alert("".concat(w," unsuccessful!"))}}),P=D.mutate,A=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(n){var t,r,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_(""),n.preventDefault(),t=p.MU.test(null===b||void 0===b?void 0:b.userName),r=p.CU.test(null===b||void 0===b?void 0:b.email),s=p.f$.test(null===b||void 0===b?void 0:b.password),r&&s&&t){e.next=11;break}if(s){e.next=9;break}return _("Password length 6-24 characters.Must include uppercase and lowercase letters, a number and a special character!"),e.abrupt("return");case 9:return _("Invalid Entry!"),e.abrupt("return");case 11:if(e.prev=11,"Sign in"!==w){e.next=17;break}return e.next=15,P({values:b,api:"/api/login"});case 15:e.next=19;break;case 17:return e.next=19,P({values:(0,o.Z)((0,o.Z)({},b),{},{userName:Z}),api:"/api/register"});case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(11),console.log(e.t0),e.t0.response||_("No Server Response.");case 25:case"end":return e.stop()}}),e,null,[[11,21]])})));return function(n){return e.apply(this,arguments)}}(),H=(0,f.jsx)("button",{className:"w-full px-4 py-2 tracking-wide text-white bg-sky-700 transition-colors duration-75 transform  rounded-md hover:bg-sky-600 focus:outline-none focus:bg-sky-600",children:w}),J=(0,f.jsx)("p",{className:"".concat(M?"text-red-500":""," my-1 text-sm font-medium"),children:M});return(0,f.jsx)("div",{className:"",children:(0,f.jsxs)("div",{className:"",children:[(0,f.jsxs)("div",{className:"flex items-center justify-center gap-4 my-5",children:[(0,f.jsx)("span",{className:"".concat("Sign in"===w?"text-sky-700 underline":""," text-xl"),tabIndex:"0",role:"button",onClick:function(){return j("Sign in")},children:"Sign in"}),(0,f.jsx)("span",{className:"".concat("Sign up"===w?"text-sky-700 underline":""," text-xl"),tabIndex:"0",role:"button",onClick:function(){return j("Sign up")},children:"Sign up"})]}),(0,f.jsx)("div",{children:(0,f.jsx)(x,{label:w,values:(0,o.Z)((0,o.Z)({},b),{},{userName:Z}),handleForm:function(e){_(""),"userName"!==e.target.name?h((function(n){return(0,o.Z)((0,o.Z)({},n),{},(0,s.Z)({},e.target.name,e.target.value))})):C(e.target.value)},actionBtn:H,onSubmit:A,errorMsg:J})})]})})}}}]);
//# sourceMappingURL=750.19a19943.chunk.js.map