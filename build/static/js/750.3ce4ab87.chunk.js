"use strict";(self.webpackChunksocial_crud_app=self.webpackChunksocial_crud_app||[]).push([[750],{4750:function(e,n,t){t.r(n),t.d(n,{default:function(){return f}});var a=t(4165),r=t(5861),s=t(4942),l=t(1413),i=t(885),o=t(3418),c=t(2791),u=t(7689),d=t(9731),m=t(184),p=function(e){var n=e.label,t=void 0===n?"Sign in":n,a=e.values,r=e.handleForm,s=e.actionBtn;return(0,m.jsx)("div",{className:"relative flex flex-col justify-center min-h-screen overflow-hidden",children:(0,m.jsx)("div",{className:"w-full p-6 m-auto bg-white rounded-md shadow-md lg:max-w-xl",children:(0,m.jsxs)("form",{className:"mt-6",children:[(0,m.jsxs)("div",{className:"mb-2",children:[(0,m.jsx)("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-800",children:"Email"}),(0,m.jsx)("input",{type:"email",className:"block w-full px-4 py-2 mt-2 text-gray-900 bg-white border rounded-md focus:border-purple-400 focus:ring-purple-300 focus:outline-none focus:ring focus:ring-opacity-40",value:null===a||void 0===a?void 0:a.email,name:"email",onChange:function(e){return r(e)}})]}),"Sign in"!==t?(0,m.jsxs)("div",{className:"mb-2",children:[(0,m.jsx)("label",{htmlFor:"userName",className:"block text-sm font-semibold text-gray-900",children:"User name"}),(0,m.jsx)("input",{type:"text",className:"block w-full px-4 py-2 mt-2 text-gray-900 bg-white border rounded-md focus:border-purple-400 focus:ring-purple-300 focus:outline-none focus:ring focus:ring-opacity-40",value:null===a||void 0===a?void 0:a.userName,name:"userName",onChange:function(e){return r(e)}})]}):null,(0,m.jsxs)("div",{className:"mb-2",children:[(0,m.jsx)("label",{htmlFor:"password",className:"block text-sm font-semibold text-gray-800",children:"Password"}),(0,m.jsx)("input",{type:"password",className:"block w-full px-4 py-2 mt-2 text-gray-900 bg-white border rounded-md focus:border-purple-400 focus:ring-purple-300 focus:outline-none focus:ring focus:ring-opacity-40",name:"password",onChange:function(e){return r(e)},value:a.password})]}),(0,m.jsx)("div",{className:"mt-6",children:s})]})})})},f=function(){var e=(0,c.useState)({email:"",password:""}),n=(0,i.Z)(e,2),t=n[0],f=n[1],x=(0,c.useState)("Sign in"),g=(0,i.Z)(x,2),h=g[0],v=g[1],b=(0,c.useState)(""),y=(0,i.Z)(b,2),w=y[0],N=y[1],j=(0,u.s0)(),k=(0,o.D)({mutationKey:"athenticate",mutationFn:function(e){var n=e.values,t=e.api;return d.W.post(t,n).then((function(e){var n,t;localStorage.setItem("user",JSON.stringify(null===e||void 0===e||null===(n=e.data)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.user)),j("/",{replace:!0})})).catch((function(e){console.log({error:e}),"Sign in"===h?alert(e.response.data.data.message):alert(e.response.data.message)}))},onSuccess:function(e){},onError:function(e){console.log({err:e}),alert("".concat(h," unsuccessful!"))}}),S=k.mutate,Z=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"Sign in"!==h){e.next=6;break}return e.next=4,S({values:t,api:"/api/login"});case 4:e.next=8;break;case 6:return e.next=8,S({values:(0,l.Z)((0,l.Z)({},t),{},{userName:w}),api:"/api/register"});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),C=(0,m.jsx)("button",{type:"button",className:"w-full px-4 py-2 tracking-wide text-white bg-sky-700 transition-colors duration-75 transform  rounded-md hover:bg-sky-600 focus:outline-none focus:bg-sky-600",onClick:Z,children:h});return(0,m.jsx)("div",{className:"",children:(0,m.jsxs)("div",{className:"",children:[(0,m.jsxs)("div",{className:"flex items-center justify-center gap-4 my-5",children:[(0,m.jsx)("span",{className:"".concat("Sign in"===h?"text-sky-700 underline":""," text-xl"),tabIndex:"0",role:"button",onClick:function(){return v("Sign in")},children:"Sign in"}),(0,m.jsx)("span",{className:"".concat("Sign up"===h?"text-sky-700 underline":""," text-xl"),tabIndex:"0",role:"button",onClick:function(){return v("Sign up")},children:"Sign up"})]}),(0,m.jsx)("div",{children:(0,m.jsx)(p,{label:h,values:(0,l.Z)((0,l.Z)({},t),{},{userName:w}),handleForm:function(e){"userName"!==e.target.name?f((function(n){return(0,l.Z)((0,l.Z)({},n),{},(0,s.Z)({},e.target.name,e.target.value))})):N(e.target.value)},actionBtn:C})})]})})}},9731:function(e,n,t){t.d(n,{W:function(){return a}});var a=t(1044).ZP.create({baseURL:"https://jwt-auth-practice.vercel.app",withCredentials:!0})}}]);
//# sourceMappingURL=750.3ce4ab87.chunk.js.map