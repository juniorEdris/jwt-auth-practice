{"version":3,"file":"static/js/750.19a19943.chunk.js","mappings":"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","sources":["component/AuthForm.js","component/Authantication.js"],"sourcesContent":["import React from \"react\";\r\n\r\nconst AuthForm = ({\r\n  label = \"Sign in\",\r\n  values,\r\n  handleForm,\r\n  actionBtn,\r\n  onSubmit,\r\n  errorMsg,\r\n}) => {\r\n  return (\r\n    <div className=\"relative flex flex-col justify-center min-h-screen overflow-hidden\">\r\n      <div className=\"w-full p-6 m-auto bg-white rounded-md shadow-md lg:max-w-xl\">\r\n        {/* <h1 className=\"text-3xl font-semibold text-center text-sky-700 underline\">\r\n          {label}\r\n        </h1> */}\r\n        <form className=\"mt-6\" onSubmit={onSubmit}>\r\n          <div className=\"mb-2\">\r\n            <label\r\n              htmlFor=\"email\"\r\n              className=\"block text-sm font-semibold text-gray-800\"\r\n            >\r\n              Email\r\n            </label>\r\n            <input\r\n              type=\"email\"\r\n              autoComplete=\"off\"\r\n              className=\"block w-full px-4 py-2 mt-2 text-gray-900 bg-white border rounded-md focus:border-blue-400 focus:ring-purple-300 focus:outline-none focus:ring focus:ring-opacity-40\"\r\n              value={values?.email}\r\n              name=\"email\"\r\n              onChange={(e) => handleForm(e)}\r\n            />\r\n          </div>\r\n          {label !== \"Sign in\" ? (\r\n            <div className=\"mb-2\">\r\n              <label\r\n                htmlFor=\"userName\"\r\n                className=\"block text-sm font-semibold text-gray-900\"\r\n              >\r\n                User name\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                autoComplete=\"off\"\r\n                className=\"block w-full px-4 py-2 mt-2 text-gray-900 bg-white border rounded-md focus:border-blue-400 focus:ring-purple-300 focus:outline-none focus:ring focus:ring-opacity-40\"\r\n                value={values?.userName}\r\n                name=\"userName\"\r\n                onChange={(e) => handleForm(e)}\r\n              />\r\n            </div>\r\n          ) : null}\r\n          <div className=\"mb-2\">\r\n            <label\r\n              htmlFor=\"password\"\r\n              className=\"block text-sm font-semibold text-gray-800\"\r\n            >\r\n              Password\r\n            </label>\r\n            <input\r\n              type=\"password\"\r\n              className=\"block w-full px-4 py-2 mt-2 text-gray-900 bg-white border rounded-md focus:border-purple-400 focus:ring-purple-300 focus:outline-none focus:ring focus:ring-opacity-40\"\r\n              name=\"password\"\r\n              onChange={(e) => handleForm(e)}\r\n              value={values.password}\r\n            />\r\n          </div>\r\n          {errorMsg}\r\n          <div className=\"mt-6\">{actionBtn}</div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AuthForm;\r\n","import { useMutation } from \"@tanstack/react-query\";\r\nimport React, { useState } from \"react\";\r\nimport { useNavigate, useLocation } from \"react-router-dom\";\r\nimport useAuthStore from \"../hooks/useAuthStore\";\r\nimport { request } from \"../utils/axios\";\r\nimport { EMAIL_REGEX, PWD_REGEX, USER_REGEX } from \"../utils/etc\";\r\nimport AuthForm from \"./AuthForm\";\r\n\r\nconst Authantication = () => {\r\n  // const { setAuth } = useAuth();\r\n  const { setAuth } = useAuthStore((state) => state);\r\n\r\n  const [values, setValues] = useState({\r\n    email: \"\",\r\n    password: \"\",\r\n  });\r\n  const [form, setForm] = useState(\"Sign in\");\r\n  const [userName, setUserName] = useState(\"\");\r\n  const [errormsg, setErrormsg] = useState(\"\");\r\n\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const from = location?.state?.form?.pathname || \"/\";\r\n\r\n  const { mutate } = useMutation({\r\n    mutationKey: \"athenticate\",\r\n    mutationFn: ({ values, api }) => {\r\n      return request\r\n        .post(api, values)\r\n        .then((data) => {\r\n          localStorage.setItem(\"user\", JSON.stringify(data?.data?.data?.user));\r\n          setAuth(data?.data?.data?.user);\r\n          navigate(from, { replace: true });\r\n        })\r\n        .catch((error) => {\r\n          console.log({ error });\r\n          if (form === \"Sign in\") {\r\n            alert(error.response.data.data.message);\r\n          } else {\r\n            alert(error.response.data.message);\r\n          }\r\n        });\r\n    },\r\n    onSuccess: (data) => {},\r\n    onError: (err) => {\r\n      console.log({ err });\r\n      alert(`${form} unsuccessful!`);\r\n    },\r\n  });\r\n\r\n  const handleForm = (e) => {\r\n    setErrormsg(\"\");\r\n    if (!(e.target.name === \"userName\")) {\r\n      setValues((prev) => ({ ...prev, [e.target.name]: e.target.value }));\r\n    } else {\r\n      setUserName(e.target.value);\r\n    }\r\n  };\r\n\r\n  const submitForm = async (e) => {\r\n    setErrormsg(\"\");\r\n    e.preventDefault();\r\n\r\n    // if button enabled with JS hack\r\n    const user_name = USER_REGEX.test(values?.userName);\r\n    const email = EMAIL_REGEX.test(values?.email);\r\n    const password = PWD_REGEX.test(values?.password);\r\n\r\n    if (!email || !password || !user_name) {\r\n      if (!password) {\r\n        setErrormsg(\r\n          \"Password length 6-24 characters.Must include uppercase and lowercase letters, a number and a special character!\"\r\n        );\r\n        return;\r\n      }\r\n      setErrormsg(\"Invalid Entry!\");\r\n      return;\r\n    }\r\n    try {\r\n      if (form === \"Sign in\") {\r\n        await mutate({ values, api: \"/api/login\" });\r\n      } else {\r\n        await mutate({ values: { ...values, userName }, api: \"/api/register\" });\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n      if (!error.response) setErrormsg(\"No Server Response.\");\r\n    }\r\n  };\r\n\r\n  const actionBtn = (\r\n    <button className=\"w-full px-4 py-2 tracking-wide text-white bg-sky-700 transition-colors duration-75 transform  rounded-md hover:bg-sky-600 focus:outline-none focus:bg-sky-600\">\r\n      {form}\r\n    </button>\r\n  );\r\n\r\n  const errorSection = (\r\n    <p className={`${errormsg ? \"text-red-500\" : \"\"} my-1 text-sm font-medium`}>\r\n      {errormsg}\r\n    </p>\r\n  );\r\n\r\n  return (\r\n    <div className=\"\">\r\n      <div className=\"\">\r\n        <div className=\"flex items-center justify-center gap-4 my-5\">\r\n          <span\r\n            className={`${\r\n              form === \"Sign in\" ? \"text-sky-700 underline\" : \"\"\r\n            } text-xl`}\r\n            tabIndex=\"0\"\r\n            role=\"button\"\r\n            onClick={() => setForm(\"Sign in\")}\r\n          >\r\n            Sign in\r\n          </span>\r\n          <span\r\n            className={`${\r\n              form === \"Sign up\" ? \"text-sky-700 underline\" : \"\"\r\n            } text-xl`}\r\n            tabIndex=\"0\"\r\n            role=\"button\"\r\n            onClick={() => setForm(\"Sign up\")}\r\n          >\r\n            Sign up\r\n          </span>\r\n        </div>\r\n        <div>\r\n          <AuthForm\r\n            label={form}\r\n            values={{ ...values, userName }}\r\n            handleForm={handleForm}\r\n            actionBtn={actionBtn}\r\n            onSubmit={submitForm}\r\n            errorMsg={errorSection}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Authantication;\r\n"],"names":["label","values","handleForm","actionBtn","onSubmit","errorMsg","className","htmlFor","type","autoComplete","value","email","name","onChange","e","userName","password","setAuth","useAuthStore","state","useState","setValues","form","setForm","setUserName","errormsg","setErrormsg","navigate","useNavigate","location","useLocation","from","pathname","useMutation","mutationKey","mutationFn","api","request","then","data","localStorage","setItem","JSON","stringify","user","replace","catch","error","console","log","alert","response","message","onSuccess","onError","err","mutate","submitForm","preventDefault","user_name","USER_REGEX","EMAIL_REGEX","PWD_REGEX","errorSection","tabIndex","role","onClick","target","prev"],"sourceRoot":""}