"use strict";(self.webpackChunksocial_crud_app=self.webpackChunksocial_crud_app||[]).push([[750],{4750:function(e,n,t){t.r(n),t.d(n,{default:function(){return g}});var a=t(4165),r=t(5861),s=t(4942),o=t(1413),l=t(885),i=t(3418),u=t(2791),c=t(7689),d=t(4923),m=t(8720),p=t(4256),f=t(184),x=function(e){var n=e.label,t=void 0===n?"Sign in":n,a=e.values,r=e.handleForm,s=e.actionBtn,o=e.onSubmit,l=e.errorMsg;return(0,f.jsx)("div",{className:"relative flex flex-col justify-center min-h-screen overflow-hidden",children:(0,f.jsx)("div",{className:"w-full p-6 m-auto bg-white rounded-md shadow-md lg:max-w-xl",children:(0,f.jsxs)("form",{className:"mt-6",onSubmit:o,children:[(0,f.jsxs)("div",{className:"mb-2",children:[(0,f.jsx)("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-800",children:"Email"}),(0,f.jsx)("input",{type:"email",autoComplete:"off",className:"block w-full px-4 py-2 mt-2 text-gray-900 bg-white border rounded-md focus:border-purple-400 focus:ring-purple-300 focus:outline-none focus:ring focus:ring-opacity-40",value:null===a||void 0===a?void 0:a.email,name:"email",onChange:function(e){return r(e)}})]}),"Sign in"!==t?(0,f.jsxs)("div",{className:"mb-2",children:[(0,f.jsx)("label",{htmlFor:"userName",className:"block text-sm font-semibold text-gray-900",children:"User name"}),(0,f.jsx)("input",{type:"text",autoComplete:"off",className:"block w-full px-4 py-2 mt-2 text-gray-900 bg-white border rounded-md focus:border-purple-400 focus:ring-purple-300 focus:outline-none focus:ring focus:ring-opacity-40",value:null===a||void 0===a?void 0:a.userName,name:"userName",onChange:function(e){return r(e)}})]}):null,(0,f.jsxs)("div",{className:"mb-2",children:[(0,f.jsx)("label",{htmlFor:"password",className:"block text-sm font-semibold text-gray-800",children:"Password"}),(0,f.jsx)("input",{type:"password",className:"block w-full px-4 py-2 mt-2 text-gray-900 bg-white border rounded-md focus:border-purple-400 focus:ring-purple-300 focus:outline-none focus:ring focus:ring-opacity-40",name:"password",onChange:function(e){return r(e)},value:a.password})]}),l,(0,f.jsx)("div",{className:"mt-6",children:s})]})})})},g=function(){var e=(0,u.useContext)(d.Z).setAuth,n=(0,u.useState)({email:"",password:""}),t=(0,l.Z)(n,2),g=t[0],v=t[1],b=(0,u.useState)("Sign in"),h=(0,l.Z)(b,2),y=h[0],N=h[1],w=(0,u.useState)(""),j=(0,l.Z)(w,2),k=j[0],S=j[1],Z=(0,u.useState)(""),C=(0,l.Z)(Z,2),F=C[0],I=C[1],M=(0,c.s0)(),_=(0,i.D)({mutationKey:"athenticate",mutationFn:function(n){var t=n.values,a=n.api;return m.W.post(a,t).then((function(n){var t,a,r,s;localStorage.setItem("user",JSON.stringify(null===n||void 0===n||null===(t=n.data)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.user)),e(null===n||void 0===n||null===(r=n.data)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.user),M("/",{replace:!0})})).catch((function(e){console.log({error:e}),"Sign in"===y?alert(e.response.data.data.message):alert(e.response.data.message)}))},onSuccess:function(e){},onError:function(e){console.log({err:e}),alert("".concat(y," unsuccessful!"))}}),E=_.mutate,U=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(n){var t,r,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(I(""),n.preventDefault(),t=p.MU.test(null===g||void 0===g?void 0:g.userName),r=p.CU.test(null===g||void 0===g?void 0:g.email),s=p.f$.test(null===g||void 0===g?void 0:g.password),r&&s&&t){e.next=11;break}if(s){e.next=9;break}return I("Password length 6-24 characters.Must include uppercase and lowercase letters, a number and a special character!"),e.abrupt("return");case 9:return I("Invalid Entry!"),e.abrupt("return");case 11:if(e.prev=11,"Sign in"!==y){e.next=17;break}return e.next=15,E({values:g,api:"/api/login"});case 15:e.next=19;break;case 17:return e.next=19,E({values:(0,o.Z)((0,o.Z)({},g),{},{userName:k}),api:"/api/register"});case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(11),console.log(e.t0),e.t0.response||I("No Server Response.");case 25:case"end":return e.stop()}}),e,null,[[11,21]])})));return function(n){return e.apply(this,arguments)}}(),B=(0,f.jsx)("button",{className:"w-full px-4 py-2 tracking-wide text-white bg-sky-700 transition-colors duration-75 transform  rounded-md hover:bg-sky-600 focus:outline-none focus:bg-sky-600",children:y}),D=(0,f.jsx)("p",{className:"".concat(F?"text-red-500":""," my-1 text-sm font-medium"),children:F});return(0,f.jsx)("div",{className:"",children:(0,f.jsxs)("div",{className:"",children:[(0,f.jsxs)("div",{className:"flex items-center justify-center gap-4 my-5",children:[(0,f.jsx)("span",{className:"".concat("Sign in"===y?"text-sky-700 underline":""," text-xl"),tabIndex:"0",role:"button",onClick:function(){return N("Sign in")},children:"Sign in"}),(0,f.jsx)("span",{className:"".concat("Sign up"===y?"text-sky-700 underline":""," text-xl"),tabIndex:"0",role:"button",onClick:function(){return N("Sign up")},children:"Sign up"})]}),(0,f.jsx)("div",{children:(0,f.jsx)(x,{label:y,values:(0,o.Z)((0,o.Z)({},g),{},{userName:k}),handleForm:function(e){I(""),"userName"!==e.target.name?v((function(n){return(0,o.Z)((0,o.Z)({},n),{},(0,s.Z)({},e.target.name,e.target.value))})):S(e.target.value)},actionBtn:B,onSubmit:U,errorMsg:D})})]})})}}}]);
//# sourceMappingURL=750.cbe4e490.chunk.js.map